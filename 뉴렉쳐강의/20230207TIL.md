# 서블릿/JSP 강의/강좌 91 - 일괄삭제 구현하기
* JDBC에서 UPDATE/INSERT/DELETE할 때는 executeQuery가 아닌 st.executeUpdate사용
* 대부분의 post는 처리 후 redirect로 view페이지로 다시 넘김
* admin list controller 에서 service class의 deleteAllNotice 사용
```
@Override
	protected void doPost(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
		String[] openIds = request.getParameterValues("open-id");
		String[] delIds = request.getParameterValues("del-id");
		String cmd = request.getParameter("cmd");
		
		switch(cmd) {
		case "일괄공개":
			for(String openId : openIds)
				System.out.printf("open id : %s\n", openId);
			break;
		case "일괄삭제":
			NoticeService service = new NoticeService();
			int[] ids = new int[delIds.length];
			for(int i=0; i<delIds.length;i++)
				ids[i] = Integer.parseInt(delIds[i]);
			
			int result = service.deleteNoticeAll(delIds);
			break;
		}
		
		response.sendRedirect("list");
		
	}
```
* service class에서 deleteAllNotice 구현
```
public int deleteNoticeAll(String[] ids) {
		
		int result = 0;
		
		String params = "";
		
		for(int i=0; i<ids.length; i++) {
			params += ids[i];
			if(i < ids.length-1)
				params += ",";
		}
			 
		
		String sql = "DELETE NOTICE WHERE ID IN ("+params+")";//배열을 query문에 붙힐 방법이 없어서 for문을 통해 String 생성 
		
		String url = "jdbc:oracle:thin:@localhost:1521/xepdb1";

		
		try {
			Class.forName("oracle.jdbc.driver.OracleDriver");
			Connection con = DriverManager.getConnection(url,"newlec","24rkwk");
			Statement st = con.createStatement();
			
			result = st.executeUpdate(sql);//INSERT/UPDATE/DELETE는 executeUpdate함수를 통해 실행, 결과값 변경된 레코드 수 int로 반환

			st.close();
			con.close();

		} catch (ClassNotFoundException e) {
			// TODO Auto-generated catch block
			e.printStackTrace();
		} catch (SQLException e) {
			// TODO Auto-generated catch block
			e.printStackTrace();
		}
		
		return result;
	}
```

# 서블릿/JSP 강의/강좌 92 - 공지사항 등록을 위한 Controller/View 준비하기
*
